<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="/css/orderpayment.css">
  <title>주문내역</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <script src="/js/orderpayment.js" defer></script>
  <link rel="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <script src="https://kit.fontawesome.com/08edd7b20e.js" crossorigin="anonymous"></script>
  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
</head>
<script th:inline="javascript">
  var isDefaultAddress = false;

  function upAddress() {
      var url = "/orders/payment/" + [[${address.id}]]; // 실제 주소 ID 값을 가져와서 설정해야 합니다.
      console.log(url);
      $.ajax({
        url: url,
        type: "PUT",
        success: function(response) {
          // 주소 업데이트 성공 시 동작할 코드 작성
          alert("주소 업데이트가 완료되었습니다.");
          // 추가 동작이 필요한 경우 여기에 작성
        },
        error: function(jqXHR, status, error) {
          // 주소 업데이트 실패 시 동작할 코드 작성
          alert("주소 업데이트에 실패했습니다.");
          // 추가 동작이 필요한 경우 여기에 작성
        }
      });
  }
  function checkDefaultAddress(checkbox) {
    isDefaultAddress = checkbox.checked;
    console.log("checkDefaultAddress");
  }

  function submitForm() {
    if (isDefaultAddress) {
      upAddress();
    }

    // 필요한 다른 작업들 수행
  }

</script>
<body>
<section class="delivery-information">

  <div class="location-info">
    <h3 class="user-info">배송 정보</h3>
    <div class="info-box">
      <div class="address">
        <span>배송지</span>
        <input type="radio" class="current-address">기존 배송지
        <button type="button" class="new-address" onclick="DaumPostcode()">배송지 변경</button>
      </div>

      <div class="name-number">이름/연락처
        <span>이름딴</span>/
        <span>010-1111-1111</span>
      </div>

      <form th:action="@{'/orders/new/' + ${address.id}}" th:object="${address}" th:method="put">
      <div class="go-delivery">주소
        <input type="text" class="postcode" id="user-postcode" placeholder="우편번호">
        <input type="text" th:field="${address.address}" class="detail-address" id="user-road-address" placeholder="도로명주소">
        <input type="text" class="detail-address" id="user-detail-address" placeholder="상세주소">
        <div class="n-check-block">
          <input type="checkbox" class="n-check" id="delivery_defaultCheck" onchange="checkDefaultAddress(this);">
          <label for="delivery_defaultCheck">기본 배송지 설정</label>
        </div>
      </div>
        <div style="text-align: center">
          <button type="submit" class="btn btn-primary" style="" onclick="submitForm();">수정</button>
        </div>
        <!--        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">-->
      </form>

      <div class="requested">배송 요청사항
        <select class="requested-selected">
          <option value="" selected="selected">배송 시 요청사항 선택해주세요</option>
          <option value="경비실에 맡겨주세요">경비실에 맡겨주세요</option>
          <option value="집 앞에 놔주세요">집 앞에 놔주세요</option>
          <option value="배송 전 연락 바랍니다">배송 전 연락 바랍니다</option>
          <option value="안전하게 배송 부탁드립니다">안전하게 배송 부탁드립니다</option>
        </select>
      </div>

    </div>
  </div>

  <div class="items-info-box">
    <h3 class="items-info">상품 정보</h3>
    <div class="info-box2">
      <img src="" class="items-img"> <!--상품이미지-->
      <div class="items-option-info">
        <span class="items-name">상품이름(반팔)</span>
        <span class="items-one-price">가격:</span>
        <span class="items-option-price">20000</span>
        <span class="won">원</span>
        <span class="items-option">옵션: </span>
        <span class="items-option1">white</span>
        <span class="items-option-num">수량:</span>
        <span class="items-option2">2</span>
        <span class="won">개</span>
        <span class="delivery-price">배송비:</span>
        <span class="free">무료</span>
      </div>
      <div class="total-price">총 주문금액:
        <span class="total-order-price">40000</span>
        <span class="won">원</span>

      </div>
    </div>
  </div>

  <div class="payment-info-box">
    <h3 class="payment-info">결제 정보</h3>
    <div class="payment-method">
      <button class="payment-button">카드</button>
      <button class="payment-button">휴대폰결제</button>
      <button class="payment-button">가상계좌</button>
      <button class="payment-button">계좌이체</button>
      <button class="payment-button">카카오페이</button>
      <button class="payment-button">네이버페이</button>
      <button class="payment-button">삼성페이</button>
      <button class="payment-button">다른 방식</button>
    </div>
  </div>
  </div>

  <input type="submit" class="go-payment" value="결제하기">

</section>
</body>
</html>